(()=>{"use strict";const e=document.querySelector(".menu__icon"),t=document.querySelector(".header__menu"),n=document.querySelector(".shadow"),c=document.querySelector(".popup"),i=document.body;let o=!0;const s=800;function r(e){const t=e.length;if(e.length>0)for(let n=0;n<t;n++)e[n].addEventListener("click",(function(e){a(e)}))}function a(e){!async function(e){const t=await fetch("files/pets.json"),n=await t.json(),c=n.length,i=e.target.closest(".card").querySelector(".card__title").textContent;for(let e=0;e<c;e++)n[e].name===i&&l(n[e])}(e),o&&function(){const e=window.innerWidth-document.querySelector(".main-wrapper").offsetWidth+"px";i.style.paddingRight=e,i.classList.add("locked"),o=!1,setTimeout((function(){o=!0}),s)}(),c.classList.add("open"),document.body.addEventListener("click",(function(e){(e.target.classList.contains("popup__body")||e.target.classList.contains("popup__close"))&&o&&(c.classList.remove("open"),setTimeout((function(){i.style.paddingRight="0px",i.classList.remove("locked")}),s),o=!1,setTimeout((function(){o=!0}),s))}))}function l(e){const t=document.querySelector(".pet-img"),n=document.querySelector(".popup__title"),c=document.querySelector(".popup__subtitle"),i=document.querySelector(".popup__desctiption"),o=document.querySelector(".age"),s=document.querySelector(".inoculations"),r=document.querySelector(".diseases"),a=document.querySelector(".parasites");document.querySelector(".popup__content"),n.textContent=e.name,t.src=e.img,c.textContent=`${e.type} - ${e.breed}`,i.textContent=e.description,o.textContent=e.age,s.textContent=e.inoculations.join(", "),r.textContent=e.diseases.join(", "),a.textContent=e.parasites.join(", ")}const d=document.querySelector(".btn-left"),u=document.querySelector(".btn-right"),m=document.querySelector(".carousel");let p,f=[],L=[];function v(e){let t,n=0,c=[];for(;n!=e;)t=Math.floor(8*Math.random()),c.includes(t)||(c.push(t),n++);return c}function g(e,t){if(0==t.length)return!0;const n=e.length;for(let c=0;c<n;c++)if(t.includes(e[c]))return!1;return!0}function y(){let e=window.innerWidth;return e>979?3:e>719?2:1}function _(){m.classList.add("transition-left"),d.removeEventListener("click",_),u.removeEventListener("click",h)}function h(){m.classList.add("transition-right"),d.removeEventListener("click",_),u.removeEventListener("click",h)}function S(){const e=document.createElement("div");return e.classList.add("card"),e}async function k(e,t,n){const c=await fetch("files/pets.json"),i=await c.json();e.innerHTML=`\n                    <div class="card__figure">\n                        <img src=${i[n].img} alt="animal-3" class="card-img">\n                    </div>\n                    <div class="card__body">\n                        <div class="card__title">${i[n].name}</div>\n                        <a href="#" class="card__button">Learn more</a>\n                    </div>\n                    `,e.classList.add("popup-link"),t.appendChild(e),r(document.querySelectorAll(".popup-link"))}m.addEventListener("animationend",(e=>{const t=document.querySelector(".item-left"),n=document.querySelector(".item-right");let c;if("moveL"===e.animationName?(m.classList.remove("transition-left"),c=t,document.querySelector(".item-active").innerHTML=t.innerHTML):(m.classList.remove("transition-right"),c=n,document.querySelector(".item-active").innerHTML=n.innerHTML),c.innerHTML="",f=v(y()),!g(f,L))for(;!g(f,L);)f=v(y());L=f;let i=y();for(let e=0;e<i;e++)k(S(),c,f[e]);r(document.querySelectorAll(".popup-link")),d.addEventListener("click",_),u.addEventListener("click",h)})),function(){let e=window.innerWidth,t=e>979?3:e>719?2:1;for(let e=0;e<3;e++){if(f=v(y()),!g(f,L))for(;!g(f,L);)f=v(y());const n=document.createElement("div");switch(n.classList.add("cards"),e){case 0:n.classList.add("item-left");break;case 1:n.classList.add("item-active");break;case 2:n.classList.add("item-right")}for(let e=0;e<t;e++)k(S(),n,f[e]);m.appendChild(n),L=f}}();let q=document.querySelectorAll(".popup-link");window.addEventListener("click",(function(c){c.target.classList.contains("menu__line")&&function(e,t){e.classList.toggle("active"),t.classList.toggle("active"),document.body.classList.toggle("lock"),n.classList.toggle("active")}(e,t),document.body.addEventListener("click",(function(c){!c.target.classList.contains("header-nav__link")&&c.target.classList.contains("header__menu")||function(e,t){e.classList.remove("active"),t.classList.remove("active"),document.body.classList.remove("lock"),n.classList.remove("active")}(e,t)}))})),d&&u&&(d.addEventListener("click",_),p=document.querySelector(".item-active"),u.addEventListener("click",h)),r(q),function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}()})();